# Configuration Nginx pour les URLs propres (sans .html)
# À ajouter dans votre bloc server {} dans le fichier de configuration Nginx

location / {
    # Essayer le fichier demandé, puis avec .html, puis 404
    try_files $uri $uri.html $uri/ =404;
}

# Redirection permanente si quelqu'un accède avec .html
location ~ \.html$ {
    rewrite ^/(.*)\.html$ /$1 permanent;
}

# Configuration pour les fichiers statiques
# Images et polices : cache long (1 mois) - on ne change pas souvent les images
location ~* \.(jpg|jpeg|png|gif|ico|svg|webp|woff|woff2|ttf|eot)$ {
    expires 1M;
    add_header Cache-Control "public";
}

# CSS et JS : cache court ou revalidation forcée pour voir les updates rapidement
location ~* \.(css|js)$ {
    # Option 1: no-cache = le navigateur demande toujours au serveur "c'est modifié ?" (304 Not Modified)
    # expires -1;
    # add_header Cache-Control "no-cache, public, must-revalidate";
    
    # Option 2 (Soft): 10 minutes de cache local, ensuite on vérifie. C'est un bon compromis.
    expires 10m;
    add_header Cache-Control "public, must-revalidate";
}
